{"ast":null,"code":"import { DataUtil, getObjectPropertyValueByKey, stringSnakeToCamel, getAttributeValueByBreakpoint, getViewPort, isVisibleElement, throttle, getCSS, ElementStyleUtil } from '../_utils/index';\nimport { CookieComponent } from './_CookieComponent';\nconst defaultScrollOptions = {\n  saveState: true\n};\n\nclass ScrollComponent {\n  constructor(_element, options) {\n    this.element = void 0;\n    this.options = void 0;\n    this.id = void 0;\n\n    this.getOption = name => {\n      if (this.element.hasAttribute('data-kt-scroll-' + name) === true) {\n        const attr = this.element.getAttribute('data-kt-scroll-' + name) || '';\n        let value = getAttributeValueByBreakpoint(attr);\n\n        if (value !== null && String(value) === 'true') {\n          value = true;\n        } else if (value !== null && String(value) === 'false') {\n          value = false;\n        }\n\n        return value;\n      } else {\n        const optionName = stringSnakeToCamel(name);\n        const option = getObjectPropertyValueByKey(this.options, optionName);\n\n        if (option) {\n          return getAttributeValueByBreakpoint(option);\n        } else {\n          return null;\n        }\n      }\n    };\n\n    this.getHeightType = () => {\n      if (this.getOption('height')) {\n        return 'height';\n      }\n\n      if (this.getOption('min-height')) {\n        return 'min-height';\n      }\n\n      if (this.getOption('max-height')) {\n        return 'max-height';\n      }\n    };\n\n    this.getAutoHeight = () => {\n      let height = getViewPort().height;\n      const dependencies = this.getOption('dependencies');\n      const wrappers = this.getOption('wrappers');\n      const offset = this.getOption('offset'); // Height dependencies\n\n      if (dependencies !== null) {\n        const elements = document.querySelectorAll(dependencies);\n\n        if (elements && elements.length > 0) {\n          for (let i = 0, len = elements.length; i < len; i++) {\n            const element = elements[i];\n\n            if (isVisibleElement(element) === false) {\n              continue;\n            }\n\n            height = height - parseInt(getCSS(element, 'height'));\n            height = height - parseInt(getCSS(element, 'margin-top'));\n            height = height - parseInt(getCSS(element, 'margin-bottom'));\n            const borderTop = getCSS(element, 'border-top');\n\n            if (borderTop) {\n              height = height - parseInt(borderTop);\n            }\n\n            const borderBottom = getCSS(element, 'border-bottom');\n\n            if (borderBottom) {\n              height = height - parseInt(borderBottom);\n            }\n          }\n        }\n      } // Wrappers\n\n\n      if (wrappers !== null) {\n        var elements = document.querySelectorAll(wrappers);\n\n        if (elements && elements.length > 0) {\n          for (let i = 0, len = elements.length; i < len; i++) {\n            const element = elements[i];\n\n            if (!isVisibleElement(element)) {\n              continue;\n            }\n\n            height = height - parseInt(getCSS(element, 'margin-top'));\n            height = height - parseInt(getCSS(element, 'margin-bottom'));\n            height = height - parseInt(getCSS(element, 'padding-top'));\n            height = height - parseInt(getCSS(element, 'padding-bottom'));\n            const borderTop = getCSS(element, 'border-top');\n\n            if (borderTop) {\n              height = height - parseInt(borderTop);\n            }\n\n            const borderBottom = getCSS(element, 'border-bottom');\n\n            if (borderBottom) {\n              height = height - parseInt(borderBottom);\n            }\n          }\n        }\n      } // Custom offset\n\n\n      if (offset !== null) {\n        height = height - parseInt(offset);\n      }\n\n      height = height - parseInt(getCSS(this.element, 'margin-top'));\n      height = height - parseInt(getCSS(this.element, 'margin-bottom'));\n      const borderTop = getCSS(this.element, 'border-top');\n\n      if (borderTop) {\n        height = height - parseInt(borderTop);\n      }\n\n      const borderBottom = getCSS(this.element, 'border-bottom');\n\n      if (borderBottom) {\n        height = height - parseInt(borderBottom);\n      }\n\n      height = String(height) + 'px';\n      return height;\n    };\n\n    this.setupHeight = () => {\n      let height = this.getHeight();\n      let heightType = this.getHeightType(); // Set height\n\n      if (height !== null && height.length > 0) {\n        ElementStyleUtil.set(this.element, heightType, height);\n      } else {\n        ElementStyleUtil.set(this.element, heightType, '');\n      }\n    };\n\n    this.setupState = () => {\n      if (this.getOption('save-state') === true && this.id) {\n        const cookie = CookieComponent.get(this.id + 'st');\n\n        if (cookie) {\n          var pos = parseInt(cookie);\n\n          if (pos > 0) {\n            this.element.scrollTop = pos;\n          }\n        }\n      }\n    };\n\n    this.setupScrollHandler = () => {\n      if (this.getOption('save-state') === true && this.id) {\n        this.element.addEventListener('scroll', this.scrollHandler);\n      } else {\n        this.element.removeEventListener('scroll', this.scrollHandler);\n      }\n    };\n\n    this.scrollHandler = () => {\n      const cookieId = this.id + 'st';\n      CookieComponent.set(cookieId, this.element.scrollTop, {});\n    };\n\n    this.destroyScrollHandler = () => {\n      this.element.removeEventListener('scroll', this.scrollHandler);\n    };\n\n    this.resetHeight = () => {\n      const heghtType = this.getHeightType();\n\n      if (heghtType) {\n        ElementStyleUtil.set(this.element, heghtType, '');\n      }\n    };\n\n    this.update = () => {\n      // Activate/deactivate\n      if (this.getOption('activate') === true || !this.element.hasAttribute('data-kt-scroll-activate')) {\n        this.setupHeight();\n        this.setupScrollHandler();\n        this.setupState();\n      } else {\n        this.resetHeight();\n        this.destroyScrollHandler();\n      }\n    };\n\n    this.getHeight = () => {\n      const heightType = this.getHeightType();\n      const height = this.getOption(heightType || '');\n\n      if (height instanceof Function) {\n        return height.call(height);\n      } else if (height !== null && typeof height === 'string' && height.toLowerCase() === 'auto') {\n        return this.getAutoHeight();\n      } else {\n        return height;\n      }\n    };\n\n    this.getElement = () => {\n      return this.element;\n    };\n\n    this.element = _element;\n    this.options = Object.assign(defaultScrollOptions, options);\n    this.id = this.element.getAttribute('id') || '';\n    this.update(); // this.element.setAttribute('data-kt-scrolltop', 'true')\n\n    DataUtil.set(this.element, 'scroll', this);\n  }\n\n  // Static methods\n  static hasInstace(element) {\n    return DataUtil.has(element, 'scroll');\n  }\n\n  static getInstance(element) {\n    if (element !== null && ScrollComponent.hasInstace(element)) {\n      return DataUtil.get(element, 'scroll');\n    }\n  } // Create Instances\n\n\n  static createInstances(selector) {\n    const elements = document.body.querySelectorAll(selector);\n    elements.forEach(element => {\n      const item = element;\n      let scroll = ScrollComponent.getInstance(item);\n\n      if (!scroll) {\n        scroll = new ScrollComponent(item, defaultScrollOptions);\n      }\n    });\n  }\n\n  static destroyAll(attr = '[data-kt-scroll=\"true\"]') {}\n\n  static bootstrap(attr = '[data-kt-scroll=\"true\"]') {\n    ScrollComponent.createInstances(attr);\n    ScrollComponent.resize();\n  }\n\n  static reinitialization(attr = '[data-kt-scroll=\"true\"]') {\n    ScrollComponent.createInstances(attr);\n  }\n\n  static resize() {\n    // Window Resize Handling\n    window.addEventListener('resize', function () {\n      let timer;\n      throttle(timer, () => {\n        // Locate and update Drawer instances on window resize\n        const elements = document.body.querySelectorAll('[data-kt-scroll=\"true\"]');\n        elements.forEach(element => {\n          const instance = ScrollComponent.getInstance(element);\n\n          if (instance) {\n            instance.update();\n          }\n        });\n      }, 200);\n    });\n  }\n\n}\n\nScrollComponent.createInstance = (element, options = defaultScrollOptions) => {\n  let scroll = ScrollComponent.getInstance(element);\n\n  if (!scroll) {\n    scroll = new ScrollComponent(element, options);\n  }\n\n  return scroll;\n};\n\nexport { ScrollComponent, defaultScrollOptions };","map":{"version":3,"sources":["/Users/alireza/Desktop/Admin Panel/tosanex-admin-panel/src/src/_metronic/assets/ts/components/_ScrollComponent.ts"],"names":["DataUtil","getObjectPropertyValueByKey","stringSnakeToCamel","getAttributeValueByBreakpoint","getViewPort","isVisibleElement","throttle","getCSS","ElementStyleUtil","CookieComponent","defaultScrollOptions","saveState","ScrollComponent","constructor","_element","options","element","id","getOption","name","hasAttribute","attr","getAttribute","value","String","optionName","option","getHeightType","getAutoHeight","height","dependencies","wrappers","offset","elements","document","querySelectorAll","length","i","len","parseInt","borderTop","borderBottom","setupHeight","getHeight","heightType","set","setupState","cookie","get","pos","scrollTop","setupScrollHandler","addEventListener","scrollHandler","removeEventListener","cookieId","destroyScrollHandler","resetHeight","heghtType","update","Function","call","toLowerCase","getElement","Object","assign","hasInstace","has","getInstance","createInstances","selector","body","forEach","item","scroll","destroyAll","bootstrap","resize","reinitialization","window","timer","instance","createInstance"],"mappings":"AAAA,SACEA,QADF,EAEEC,2BAFF,EAGEC,kBAHF,EAIEC,6BAJF,EAKEC,WALF,EAMEC,gBANF,EAOEC,QAPF,EAQEC,MARF,EASEC,gBATF,QAUO,iBAVP;AAWA,SAAQC,eAAR,QAA8B,oBAA9B;AAMA,MAAMC,oBAAmC,GAAG;AAC1CC,EAAAA,SAAS,EAAE;AAD+B,CAA5C;;AAIA,MAAMC,eAAN,CAAsB;AAKpBC,EAAAA,WAAW,CAACC,QAAD,EAAwBC,OAAxB,EAAgD;AAAA,SAJ3DC,OAI2D;AAAA,SAH3DD,OAG2D;AAAA,SAF3DE,EAE2D;;AAAA,SASnDC,SATmD,GAStCC,IAAD,IAAkB;AACpC,UAAI,KAAKH,OAAL,CAAaI,YAAb,CAA0B,oBAAoBD,IAA9C,MAAwD,IAA5D,EAAkE;AAChE,cAAME,IAAI,GAAG,KAAKL,OAAL,CAAaM,YAAb,CAA0B,oBAAoBH,IAA9C,KAAuD,EAApE;AACA,YAAII,KAA8B,GAAGpB,6BAA6B,CAACkB,IAAD,CAAlE;;AACA,YAAIE,KAAK,KAAK,IAAV,IAAkBC,MAAM,CAACD,KAAD,CAAN,KAAkB,MAAxC,EAAgD;AAC9CA,UAAAA,KAAK,GAAG,IAAR;AACD,SAFD,MAEO,IAAIA,KAAK,KAAK,IAAV,IAAkBC,MAAM,CAACD,KAAD,CAAN,KAAkB,OAAxC,EAAiD;AACtDA,UAAAA,KAAK,GAAG,KAAR;AACD;;AAED,eAAOA,KAAP;AACD,OAVD,MAUO;AACL,cAAME,UAAU,GAAGvB,kBAAkB,CAACiB,IAAD,CAArC;AACA,cAAMO,MAAM,GAAGzB,2BAA2B,CAAC,KAAKc,OAAN,EAAeU,UAAf,CAA1C;;AACA,YAAIC,MAAJ,EAAY;AACV,iBAAOvB,6BAA6B,CAACuB,MAAD,CAApC;AACD,SAFD,MAEO;AACL,iBAAO,IAAP;AACD;AACF;AACF,KA7B0D;;AAAA,SA+BnDC,aA/BmD,GA+BnC,MAAM;AAC5B,UAAI,KAAKT,SAAL,CAAe,QAAf,CAAJ,EAA8B;AAC5B,eAAO,QAAP;AACD;;AACD,UAAI,KAAKA,SAAL,CAAe,YAAf,CAAJ,EAAkC;AAChC,eAAO,YAAP;AACD;;AACD,UAAI,KAAKA,SAAL,CAAe,YAAf,CAAJ,EAAkC;AAChC,eAAO,YAAP;AACD;AACF,KAzC0D;;AAAA,SA2CnDU,aA3CmD,GA2CnC,MAAM;AAC5B,UAAIC,MAAuB,GAAGzB,WAAW,GAAGyB,MAA5C;AACA,YAAMC,YAAY,GAAG,KAAKZ,SAAL,CAAe,cAAf,CAArB;AACA,YAAMa,QAAQ,GAAG,KAAKb,SAAL,CAAe,UAAf,CAAjB;AACA,YAAMc,MAAM,GAAG,KAAKd,SAAL,CAAe,QAAf,CAAf,CAJ4B,CAM5B;;AACA,UAAIY,YAAY,KAAK,IAArB,EAA2B;AACzB,cAAMG,QAAQ,GAAGC,QAAQ,CAACC,gBAAT,CAA0BL,YAA1B,CAAjB;;AACA,YAAIG,QAAQ,IAAIA,QAAQ,CAACG,MAAT,GAAkB,CAAlC,EAAqC;AACnC,eAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAGL,QAAQ,CAACG,MAA/B,EAAuCC,CAAC,GAAGC,GAA3C,EAAgDD,CAAC,EAAjD,EAAqD;AACnD,kBAAMrB,OAAO,GAAGiB,QAAQ,CAACI,CAAD,CAAxB;;AACA,gBAAIhC,gBAAgB,CAACW,OAAD,CAAhB,KAA8B,KAAlC,EAAyC;AACvC;AACD;;AAEDa,YAAAA,MAAM,GAAGA,MAAM,GAAGU,QAAQ,CAAChC,MAAM,CAACS,OAAD,EAAU,QAAV,CAAP,CAA1B;AACAa,YAAAA,MAAM,GAAGA,MAAM,GAAGU,QAAQ,CAAChC,MAAM,CAACS,OAAD,EAAU,YAAV,CAAP,CAA1B;AACAa,YAAAA,MAAM,GAAGA,MAAM,GAAGU,QAAQ,CAAChC,MAAM,CAACS,OAAD,EAAU,eAAV,CAAP,CAA1B;AAEA,kBAAMwB,SAAS,GAAGjC,MAAM,CAACS,OAAD,EAAU,YAAV,CAAxB;;AACA,gBAAIwB,SAAJ,EAAe;AACbX,cAAAA,MAAM,GAAGA,MAAM,GAAGU,QAAQ,CAACC,SAAD,CAA1B;AACD;;AAED,kBAAMC,YAAY,GAAGlC,MAAM,CAACS,OAAD,EAAU,eAAV,CAA3B;;AACA,gBAAIyB,YAAJ,EAAkB;AAChBZ,cAAAA,MAAM,GAAGA,MAAM,GAAGU,QAAQ,CAACE,YAAD,CAA1B;AACD;AACF;AACF;AACF,OA/B2B,CAiC5B;;;AACA,UAAIV,QAAQ,KAAK,IAAjB,EAAuB;AACrB,YAAIE,QAAQ,GAAGC,QAAQ,CAACC,gBAAT,CAA0BJ,QAA1B,CAAf;;AACA,YAAIE,QAAQ,IAAIA,QAAQ,CAACG,MAAT,GAAkB,CAAlC,EAAqC;AACnC,eAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAGL,QAAQ,CAACG,MAA/B,EAAuCC,CAAC,GAAGC,GAA3C,EAAgDD,CAAC,EAAjD,EAAqD;AACnD,kBAAMrB,OAAO,GAAGiB,QAAQ,CAACI,CAAD,CAAxB;;AAEA,gBAAI,CAAChC,gBAAgB,CAACW,OAAD,CAArB,EAAgC;AAC9B;AACD;;AAEDa,YAAAA,MAAM,GAAGA,MAAM,GAAGU,QAAQ,CAAChC,MAAM,CAACS,OAAD,EAAU,YAAV,CAAP,CAA1B;AACAa,YAAAA,MAAM,GAAGA,MAAM,GAAGU,QAAQ,CAAChC,MAAM,CAACS,OAAD,EAAU,eAAV,CAAP,CAA1B;AACAa,YAAAA,MAAM,GAAGA,MAAM,GAAGU,QAAQ,CAAChC,MAAM,CAACS,OAAD,EAAU,aAAV,CAAP,CAA1B;AACAa,YAAAA,MAAM,GAAGA,MAAM,GAAGU,QAAQ,CAAChC,MAAM,CAACS,OAAD,EAAU,gBAAV,CAAP,CAA1B;AAEA,kBAAMwB,SAAS,GAAGjC,MAAM,CAACS,OAAD,EAAU,YAAV,CAAxB;;AACA,gBAAIwB,SAAJ,EAAe;AACbX,cAAAA,MAAM,GAAGA,MAAM,GAAGU,QAAQ,CAACC,SAAD,CAA1B;AACD;;AAED,kBAAMC,YAAY,GAAGlC,MAAM,CAACS,OAAD,EAAU,eAAV,CAA3B;;AACA,gBAAIyB,YAAJ,EAAkB;AAChBZ,cAAAA,MAAM,GAAGA,MAAM,GAAGU,QAAQ,CAACE,YAAD,CAA1B;AACD;AACF;AACF;AACF,OA5D2B,CA8D5B;;;AACA,UAAIT,MAAM,KAAK,IAAf,EAAqB;AACnBH,QAAAA,MAAM,GAAGA,MAAM,GAAGU,QAAQ,CAACP,MAAD,CAA1B;AACD;;AAEDH,MAAAA,MAAM,GAAGA,MAAM,GAAGU,QAAQ,CAAChC,MAAM,CAAC,KAAKS,OAAN,EAAe,YAAf,CAAP,CAA1B;AACAa,MAAAA,MAAM,GAAGA,MAAM,GAAGU,QAAQ,CAAChC,MAAM,CAAC,KAAKS,OAAN,EAAe,eAAf,CAAP,CAA1B;AAEA,YAAMwB,SAAS,GAAGjC,MAAM,CAAC,KAAKS,OAAN,EAAe,YAAf,CAAxB;;AACA,UAAIwB,SAAJ,EAAe;AACbX,QAAAA,MAAM,GAAGA,MAAM,GAAGU,QAAQ,CAACC,SAAD,CAA1B;AACD;;AAED,YAAMC,YAAY,GAAGlC,MAAM,CAAC,KAAKS,OAAN,EAAe,eAAf,CAA3B;;AACA,UAAIyB,YAAJ,EAAkB;AAChBZ,QAAAA,MAAM,GAAGA,MAAM,GAAGU,QAAQ,CAACE,YAAD,CAA1B;AACD;;AAEDZ,MAAAA,MAAM,GAAGL,MAAM,CAACK,MAAD,CAAN,GAAiB,IAA1B;AAEA,aAAOA,MAAP;AACD,KA9H0D;;AAAA,SAgInDa,WAhImD,GAgIrC,MAAM;AAC1B,UAAIb,MAAM,GAAG,KAAKc,SAAL,EAAb;AACA,UAAIC,UAAU,GAAG,KAAKjB,aAAL,EAAjB,CAF0B,CAI1B;;AACA,UAAIE,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACO,MAAP,GAAgB,CAAvC,EAA0C;AACxC5B,QAAAA,gBAAgB,CAACqC,GAAjB,CAAqB,KAAK7B,OAA1B,EAAmC4B,UAAnC,EAA+Cf,MAA/C;AACD,OAFD,MAEO;AACLrB,QAAAA,gBAAgB,CAACqC,GAAjB,CAAqB,KAAK7B,OAA1B,EAAmC4B,UAAnC,EAA+C,EAA/C;AACD;AACF,KA1I0D;;AAAA,SA4InDE,UA5ImD,GA4ItC,MAAM;AACzB,UAAI,KAAK5B,SAAL,CAAe,YAAf,MAAiC,IAAjC,IAAyC,KAAKD,EAAlD,EAAsD;AACpD,cAAM8B,MAAM,GAAGtC,eAAe,CAACuC,GAAhB,CAAoB,KAAK/B,EAAL,GAAU,IAA9B,CAAf;;AACA,YAAI8B,MAAJ,EAAY;AACV,cAAIE,GAAG,GAAGV,QAAQ,CAACQ,MAAD,CAAlB;;AAEA,cAAIE,GAAG,GAAG,CAAV,EAAa;AACX,iBAAKjC,OAAL,CAAakC,SAAb,GAAyBD,GAAzB;AACD;AACF;AACF;AACF,KAvJ0D;;AAAA,SAyJnDE,kBAzJmD,GAyJ9B,MAAM;AACjC,UAAI,KAAKjC,SAAL,CAAe,YAAf,MAAiC,IAAjC,IAAyC,KAAKD,EAAlD,EAAsD;AACpD,aAAKD,OAAL,CAAaoC,gBAAb,CAA8B,QAA9B,EAAwC,KAAKC,aAA7C;AACD,OAFD,MAEO;AACL,aAAKrC,OAAL,CAAasC,mBAAb,CAAiC,QAAjC,EAA2C,KAAKD,aAAhD;AACD;AACF,KA/J0D;;AAAA,SAiKnDA,aAjKmD,GAiKnC,MAAM;AAC5B,YAAME,QAAQ,GAAG,KAAKtC,EAAL,GAAU,IAA3B;AACAR,MAAAA,eAAe,CAACoC,GAAhB,CAAoBU,QAApB,EAA8B,KAAKvC,OAAL,CAAakC,SAA3C,EAAsD,EAAtD;AACD,KApK0D;;AAAA,SAsKnDM,oBAtKmD,GAsK5B,MAAM;AACnC,WAAKxC,OAAL,CAAasC,mBAAb,CAAiC,QAAjC,EAA2C,KAAKD,aAAhD;AACD,KAxK0D;;AAAA,SA0KnDI,WA1KmD,GA0KrC,MAAM;AAC1B,YAAMC,SAAS,GAAG,KAAK/B,aAAL,EAAlB;;AACA,UAAI+B,SAAJ,EAAe;AACblD,QAAAA,gBAAgB,CAACqC,GAAjB,CAAqB,KAAK7B,OAA1B,EAAmC0C,SAAnC,EAA8C,EAA9C;AACD;AACF,KA/K0D;;AAAA,SAoLpDC,MApLoD,GAoL3C,MAAM;AACpB;AACA,UACE,KAAKzC,SAAL,CAAe,UAAf,MAA+B,IAA/B,IACA,CAAC,KAAKF,OAAL,CAAaI,YAAb,CAA0B,yBAA1B,CAFH,EAGE;AACA,aAAKsB,WAAL;AACA,aAAKS,kBAAL;AACA,aAAKL,UAAL;AACD,OAPD,MAOO;AACL,aAAKW,WAAL;AACA,aAAKD,oBAAL;AACD;AACF,KAjM0D;;AAAA,SAmMpDb,SAnMoD,GAmMxC,MAAM;AACvB,YAAMC,UAAU,GAAG,KAAKjB,aAAL,EAAnB;AACA,YAAME,MAAM,GAAG,KAAKX,SAAL,CAAe0B,UAAU,IAAI,EAA7B,CAAf;;AACA,UAAIf,MAAM,YAAY+B,QAAtB,EAAgC;AAC9B,eAAO/B,MAAM,CAACgC,IAAP,CAAYhC,MAAZ,CAAP;AACD,OAFD,MAEO,IAAIA,MAAM,KAAK,IAAX,IAAmB,OAAOA,MAAP,KAAkB,QAArC,IAAiDA,MAAM,CAACiC,WAAP,OAAyB,MAA9E,EAAsF;AAC3F,eAAO,KAAKlC,aAAL,EAAP;AACD,OAFM,MAEA;AACL,eAAOC,MAAP;AACD;AACF,KA7M0D;;AAAA,SA+MpDkC,UA/MoD,GA+MvC,MAAM;AACxB,aAAO,KAAK/C,OAAZ;AACD,KAjN0D;;AACzD,SAAKA,OAAL,GAAeF,QAAf;AACA,SAAKC,OAAL,GAAeiD,MAAM,CAACC,MAAP,CAAcvD,oBAAd,EAAoCK,OAApC,CAAf;AACA,SAAKE,EAAL,GAAU,KAAKD,OAAL,CAAaM,YAAb,CAA0B,IAA1B,KAAmC,EAA7C;AACA,SAAKqC,MAAL,GAJyD,CAKzD;;AACA3D,IAAAA,QAAQ,CAAC6C,GAAT,CAAa,KAAK7B,OAAlB,EAA2B,QAA3B,EAAqC,IAArC;AACD;;AA4MD;AACwB,SAAVkD,UAAU,CAAClD,OAAD,EAAuB;AAC7C,WAAOhB,QAAQ,CAACmE,GAAT,CAAanD,OAAb,EAAsB,QAAtB,CAAP;AACD;;AAEwB,SAAXoD,WAAW,CAACpD,OAAD,EAAuB;AAC9C,QAAIA,OAAO,KAAK,IAAZ,IAAoBJ,eAAe,CAACsD,UAAhB,CAA2BlD,OAA3B,CAAxB,EAA6D;AAC3D,aAAOhB,QAAQ,CAACgD,GAAT,CAAahC,OAAb,EAAsB,QAAtB,CAAP;AACD;AACF,GAjOmB,CAmOpB;;;AAC6B,SAAfqD,eAAe,CAACC,QAAD,EAAmB;AAC9C,UAAMrC,QAAQ,GAAGC,QAAQ,CAACqC,IAAT,CAAcpC,gBAAd,CAA+BmC,QAA/B,CAAjB;AACArC,IAAAA,QAAQ,CAACuC,OAAT,CAAkBxD,OAAD,IAAsB;AACrC,YAAMyD,IAAI,GAAGzD,OAAb;AACA,UAAI0D,MAAM,GAAG9D,eAAe,CAACwD,WAAhB,CAA4BK,IAA5B,CAAb;;AACA,UAAI,CAACC,MAAL,EAAa;AACXA,QAAAA,MAAM,GAAG,IAAI9D,eAAJ,CAAoB6D,IAApB,EAA0B/D,oBAA1B,CAAT;AACD;AACF,KAND;AAOD;;AAEuB,SAAViE,UAAU,CAACtD,IAAY,GAAG,yBAAhB,EAA2C,CAAE;;AAE9C,SAATuD,SAAS,CAACvD,IAAY,GAAG,yBAAhB,EAA2C;AAChET,IAAAA,eAAe,CAACyD,eAAhB,CAAgChD,IAAhC;AACAT,IAAAA,eAAe,CAACiE,MAAhB;AACD;;AAa6B,SAAhBC,gBAAgB,CAACzD,IAAY,GAAG,yBAAhB,EAA2C;AACvET,IAAAA,eAAe,CAACyD,eAAhB,CAAgChD,IAAhC;AACD;;AAEmB,SAANwD,MAAM,GAAG;AACrB;AACAE,IAAAA,MAAM,CAAC3B,gBAAP,CAAwB,QAAxB,EAAkC,YAAY;AAC5C,UAAI4B,KAAJ;AACA1E,MAAAA,QAAQ,CACN0E,KADM,EAEN,MAAM;AACJ;AACA,cAAM/C,QAAQ,GAAGC,QAAQ,CAACqC,IAAT,CAAcpC,gBAAd,CAA+B,yBAA/B,CAAjB;AACAF,QAAAA,QAAQ,CAACuC,OAAT,CAAkBxD,OAAD,IAAsB;AACrC,gBAAMiE,QAAQ,GAAGrE,eAAe,CAACwD,WAAhB,CAA4BpD,OAA5B,CAAjB;;AACA,cAAIiE,QAAJ,EAAc;AACZA,YAAAA,QAAQ,CAACtB,MAAT;AACD;AACF,SALD;AAMD,OAXK,EAYN,GAZM,CAAR;AAcD,KAhBD;AAiBD;;AAxRmB;;AAAhB/C,e,CAsPUsE,c,GAAiB,CAC7BlE,OAD6B,EAE7BD,OAAsB,GAAGL,oBAFI,KAGG;AAChC,MAAIgE,MAAM,GAAG9D,eAAe,CAACwD,WAAhB,CAA4BpD,OAA5B,CAAb;;AACA,MAAI,CAAC0D,MAAL,EAAa;AACXA,IAAAA,MAAM,GAAG,IAAI9D,eAAJ,CAAoBI,OAApB,EAA6BD,OAA7B,CAAT;AACD;;AACD,SAAO2D,MAAP;AACD,C;;AA4BH,SAAQ9D,eAAR,EAAyBF,oBAAzB","sourcesContent":["import {\r\n  DataUtil,\r\n  getObjectPropertyValueByKey,\r\n  stringSnakeToCamel,\r\n  getAttributeValueByBreakpoint,\r\n  getViewPort,\r\n  isVisibleElement,\r\n  throttle,\r\n  getCSS,\r\n  ElementStyleUtil,\r\n} from '../_utils/index'\r\nimport {CookieComponent} from './_CookieComponent'\r\n\r\nexport interface ScrollOptions {\r\n  saveState?: boolean\r\n}\r\n\r\nconst defaultScrollOptions: ScrollOptions = {\r\n  saveState: true,\r\n}\r\n\r\nclass ScrollComponent {\r\n  element: HTMLElement\r\n  options: ScrollOptions\r\n  id: string\r\n\r\n  constructor(_element: HTMLElement, options: ScrollOptions) {\r\n    this.element = _element\r\n    this.options = Object.assign(defaultScrollOptions, options)\r\n    this.id = this.element.getAttribute('id') || ''\r\n    this.update()\r\n    // this.element.setAttribute('data-kt-scrolltop', 'true')\r\n    DataUtil.set(this.element, 'scroll', this)\r\n  }\r\n\r\n  private getOption = (name: string) => {\r\n    if (this.element.hasAttribute('data-kt-scroll-' + name) === true) {\r\n      const attr = this.element.getAttribute('data-kt-scroll-' + name) || ''\r\n      let value: string | JSON | boolean = getAttributeValueByBreakpoint(attr)\r\n      if (value !== null && String(value) === 'true') {\r\n        value = true\r\n      } else if (value !== null && String(value) === 'false') {\r\n        value = false\r\n      }\r\n\r\n      return value\r\n    } else {\r\n      const optionName = stringSnakeToCamel(name)\r\n      const option = getObjectPropertyValueByKey(this.options, optionName)\r\n      if (option) {\r\n        return getAttributeValueByBreakpoint(option)\r\n      } else {\r\n        return null\r\n      }\r\n    }\r\n  }\r\n\r\n  private getHeightType = () => {\r\n    if (this.getOption('height')) {\r\n      return 'height'\r\n    }\r\n    if (this.getOption('min-height')) {\r\n      return 'min-height'\r\n    }\r\n    if (this.getOption('max-height')) {\r\n      return 'max-height'\r\n    }\r\n  }\r\n\r\n  private getAutoHeight = () => {\r\n    let height: number | string = getViewPort().height\r\n    const dependencies = this.getOption('dependencies')\r\n    const wrappers = this.getOption('wrappers')\r\n    const offset = this.getOption('offset')\r\n\r\n    // Height dependencies\r\n    if (dependencies !== null) {\r\n      const elements = document.querySelectorAll(dependencies as string)\r\n      if (elements && elements.length > 0) {\r\n        for (let i = 0, len = elements.length; i < len; i++) {\r\n          const element = elements[i] as HTMLElement\r\n          if (isVisibleElement(element) === false) {\r\n            continue\r\n          }\r\n\r\n          height = height - parseInt(getCSS(element, 'height'))\r\n          height = height - parseInt(getCSS(element, 'margin-top'))\r\n          height = height - parseInt(getCSS(element, 'margin-bottom'))\r\n\r\n          const borderTop = getCSS(element, 'border-top')\r\n          if (borderTop) {\r\n            height = height - parseInt(borderTop)\r\n          }\r\n\r\n          const borderBottom = getCSS(element, 'border-bottom')\r\n          if (borderBottom) {\r\n            height = height - parseInt(borderBottom)\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Wrappers\r\n    if (wrappers !== null) {\r\n      var elements = document.querySelectorAll(wrappers as string)\r\n      if (elements && elements.length > 0) {\r\n        for (let i = 0, len = elements.length; i < len; i++) {\r\n          const element = elements[i] as HTMLElement\r\n\r\n          if (!isVisibleElement(element)) {\r\n            continue\r\n          }\r\n\r\n          height = height - parseInt(getCSS(element, 'margin-top'))\r\n          height = height - parseInt(getCSS(element, 'margin-bottom'))\r\n          height = height - parseInt(getCSS(element, 'padding-top'))\r\n          height = height - parseInt(getCSS(element, 'padding-bottom'))\r\n\r\n          const borderTop = getCSS(element, 'border-top')\r\n          if (borderTop) {\r\n            height = height - parseInt(borderTop)\r\n          }\r\n\r\n          const borderBottom = getCSS(element, 'border-bottom')\r\n          if (borderBottom) {\r\n            height = height - parseInt(borderBottom)\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Custom offset\r\n    if (offset !== null) {\r\n      height = height - parseInt(offset as string)\r\n    }\r\n\r\n    height = height - parseInt(getCSS(this.element, 'margin-top'))\r\n    height = height - parseInt(getCSS(this.element, 'margin-bottom'))\r\n\r\n    const borderTop = getCSS(this.element, 'border-top')\r\n    if (borderTop) {\r\n      height = height - parseInt(borderTop)\r\n    }\r\n\r\n    const borderBottom = getCSS(this.element, 'border-bottom')\r\n    if (borderBottom) {\r\n      height = height - parseInt(borderBottom)\r\n    }\r\n\r\n    height = String(height) + 'px'\r\n\r\n    return height\r\n  }\r\n\r\n  private setupHeight = () => {\r\n    let height = this.getHeight()\r\n    let heightType = this.getHeightType() as string\r\n\r\n    // Set height\r\n    if (height !== null && height.length > 0) {\r\n      ElementStyleUtil.set(this.element, heightType, height)\r\n    } else {\r\n      ElementStyleUtil.set(this.element, heightType, '')\r\n    }\r\n  }\r\n\r\n  private setupState = () => {\r\n    if (this.getOption('save-state') === true && this.id) {\r\n      const cookie = CookieComponent.get(this.id + 'st')\r\n      if (cookie) {\r\n        var pos = parseInt(cookie)\r\n\r\n        if (pos > 0) {\r\n          this.element.scrollTop = pos\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private setupScrollHandler = () => {\r\n    if (this.getOption('save-state') === true && this.id) {\r\n      this.element.addEventListener('scroll', this.scrollHandler)\r\n    } else {\r\n      this.element.removeEventListener('scroll', this.scrollHandler)\r\n    }\r\n  }\r\n\r\n  private scrollHandler = () => {\r\n    const cookieId = this.id + 'st'\r\n    CookieComponent.set(cookieId, this.element.scrollTop, {})\r\n  }\r\n\r\n  private destroyScrollHandler = () => {\r\n    this.element.removeEventListener('scroll', this.scrollHandler)\r\n  }\r\n\r\n  private resetHeight = () => {\r\n    const heghtType = this.getHeightType()\r\n    if (heghtType) {\r\n      ElementStyleUtil.set(this.element, heghtType, '')\r\n    }\r\n  }\r\n\r\n  ///////////////////////\r\n  // ** Public API  ** //\r\n  ///////////////////////\r\n  public update = () => {\r\n    // Activate/deactivate\r\n    if (\r\n      this.getOption('activate') === true ||\r\n      !this.element.hasAttribute('data-kt-scroll-activate')\r\n    ) {\r\n      this.setupHeight()\r\n      this.setupScrollHandler()\r\n      this.setupState()\r\n    } else {\r\n      this.resetHeight()\r\n      this.destroyScrollHandler()\r\n    }\r\n  }\r\n\r\n  public getHeight = () => {\r\n    const heightType = this.getHeightType()\r\n    const height = this.getOption(heightType || '')\r\n    if (height instanceof Function) {\r\n      return height.call(height)\r\n    } else if (height !== null && typeof height === 'string' && height.toLowerCase() === 'auto') {\r\n      return this.getAutoHeight()\r\n    } else {\r\n      return height\r\n    }\r\n  }\r\n\r\n  public getElement = () => {\r\n    return this.element\r\n  }\r\n\r\n  // Static methods\r\n  public static hasInstace(element: HTMLElement) {\r\n    return DataUtil.has(element, 'scroll')\r\n  }\r\n\r\n  public static getInstance(element: HTMLElement) {\r\n    if (element !== null && ScrollComponent.hasInstace(element)) {\r\n      return DataUtil.get(element, 'scroll')\r\n    }\r\n  }\r\n\r\n  // Create Instances\r\n  public static createInstances(selector: string) {\r\n    const elements = document.body.querySelectorAll(selector)\r\n    elements.forEach((element: Element) => {\r\n      const item = element as HTMLElement\r\n      let scroll = ScrollComponent.getInstance(item)\r\n      if (!scroll) {\r\n        scroll = new ScrollComponent(item, defaultScrollOptions)\r\n      }\r\n    })\r\n  }\r\n\r\n  public static destroyAll(attr: string = '[data-kt-scroll=\"true\"]') {}\r\n\r\n  public static bootstrap(attr: string = '[data-kt-scroll=\"true\"]') {\r\n    ScrollComponent.createInstances(attr)\r\n    ScrollComponent.resize()\r\n  }\r\n\r\n  public static createInstance = (\r\n    element: HTMLElement,\r\n    options: ScrollOptions = defaultScrollOptions\r\n  ): ScrollComponent | undefined => {\r\n    let scroll = ScrollComponent.getInstance(element)\r\n    if (!scroll) {\r\n      scroll = new ScrollComponent(element, options)\r\n    }\r\n    return scroll\r\n  }\r\n\r\n  public static reinitialization(attr: string = '[data-kt-scroll=\"true\"]') {\r\n    ScrollComponent.createInstances(attr)\r\n  }\r\n\r\n  public static resize() {\r\n    // Window Resize Handling\r\n    window.addEventListener('resize', function () {\r\n      let timer\r\n      throttle(\r\n        timer,\r\n        () => {\r\n          // Locate and update Drawer instances on window resize\r\n          const elements = document.body.querySelectorAll('[data-kt-scroll=\"true\"]')\r\n          elements.forEach((element: Element) => {\r\n            const instance = ScrollComponent.getInstance(element as HTMLElement)\r\n            if (instance) {\r\n              instance.update()\r\n            }\r\n          })\r\n        },\r\n        200\r\n      )\r\n    })\r\n  }\r\n}\r\n\r\nexport {ScrollComponent, defaultScrollOptions}\r\n"]},"metadata":{},"sourceType":"module"}