{"ast":null,"code":"import { getUniqueIdWithPrefix } from './_TypesHelpers';\nexport class DOMEventHandlerUtil {\n  static on(element, selector, eventName, callBack) {\n    const eventId = getUniqueIdWithPrefix('DOMEvent');\n    DOMEventHandlerUtil.store.set(eventId, e => {\n      const targets = element.querySelectorAll(selector);\n      let target = e.target;\n\n      while (target && target !== element) {\n        for (let i = 0; i < targets.length; i++) {\n          if (target === targets[i]) {\n            callBack.call(target, e);\n          }\n        }\n\n        if (target.parentElement) {\n          target = target.parentElement;\n        } else {\n          target = null;\n        }\n      }\n    });\n    element.addEventListener(eventName, DOMEventHandlerUtil.store.get(eventId));\n    return eventId;\n  }\n\n  static off(element, eventName, eventId) {\n    const funcFromStore = DOMEventHandlerUtil.store.get(eventId);\n\n    if (!funcFromStore) {\n      return;\n    }\n\n    element.removeEventListener(eventName, funcFromStore);\n    DOMEventHandlerUtil.store.delete(eventId);\n  }\n\n  static one(element, eventName, callBack) {\n    element.addEventListener(eventName, function calee(e) {\n      // remove event\n      if (e.target && e.target.removeEventListener) {\n        e.target.removeEventListener(e.type, calee);\n      }\n\n      if (element && e && e.currentTarget) {\n        // if (element && element.removeEventListener && e && e.currentTarget) {\n        e.currentTarget.removeEventListener(e.type, calee);\n      } // call hander\n\n\n      return callBack(e);\n    });\n  }\n\n}\nDOMEventHandlerUtil.store = new Map();","map":{"version":3,"sources":["/Users/alireza/Desktop/Admin Panel/tosanex-admin-panel/src/src/_metronic/assets/ts/_utils/_DOMEventHandlerUtil.ts"],"names":["getUniqueIdWithPrefix","DOMEventHandlerUtil","on","element","selector","eventName","callBack","eventId","store","set","e","targets","querySelectorAll","target","i","length","call","parentElement","addEventListener","get","off","funcFromStore","removeEventListener","delete","one","calee","type","currentTarget","Map"],"mappings":"AAAA,SAAQA,qBAAR,QAAoC,iBAApC;AAEA,OAAO,MAAMC,mBAAN,CAA0B;AAGf,SAAFC,EAAE,CACdC,OADc,EAEdC,QAFc,EAGdC,SAHc,EAIdC,QAJc,EAKN;AACR,UAAMC,OAAO,GAAGP,qBAAqB,CAAC,UAAD,CAArC;AACAC,IAAAA,mBAAmB,CAACO,KAApB,CAA0BC,GAA1B,CAA8BF,OAA9B,EAAwCG,CAAD,IAAc;AACnD,YAAMC,OAAO,GAAGR,OAAO,CAACS,gBAAR,CAAyBR,QAAzB,CAAhB;AACA,UAAIS,MAA0B,GAAGH,CAAC,CAACG,MAAnC;;AACA,aAAOA,MAAM,IAAIA,MAAM,KAAKV,OAA5B,EAAqC;AACnC,aAAK,IAAIW,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,OAAO,CAACI,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACvC,cAAID,MAAM,KAAKF,OAAO,CAACG,CAAD,CAAtB,EAA2B;AACzBR,YAAAA,QAAQ,CAACU,IAAT,CAAcH,MAAd,EAAsBH,CAAtB;AACD;AACF;;AAED,YAAIG,MAAM,CAACI,aAAX,EAA0B;AACxBJ,UAAAA,MAAM,GAAGA,MAAM,CAACI,aAAhB;AACD,SAFD,MAEO;AACLJ,UAAAA,MAAM,GAAG,IAAT;AACD;AACF;AACF,KAhBD;AAiBAV,IAAAA,OAAO,CAACe,gBAAR,CAAyBb,SAAzB,EAAoCJ,mBAAmB,CAACO,KAApB,CAA0BW,GAA1B,CAA8BZ,OAA9B,CAApC;AACA,WAAOA,OAAP;AACD;;AAEgB,SAAHa,GAAG,CAACjB,OAAD,EAAuBE,SAAvB,EAA0CE,OAA1C,EAAiE;AAChF,UAAMc,aAAa,GAAGpB,mBAAmB,CAACO,KAApB,CAA0BW,GAA1B,CAA8BZ,OAA9B,CAAtB;;AACA,QAAI,CAACc,aAAL,EAAoB;AAClB;AACD;;AAEDlB,IAAAA,OAAO,CAACmB,mBAAR,CAA4BjB,SAA5B,EAAuCgB,aAAvC;AACApB,IAAAA,mBAAmB,CAACO,KAApB,CAA0Be,MAA1B,CAAiChB,OAAjC;AACD;;AAEgB,SAAHiB,GAAG,CAACrB,OAAD,EAAuBE,SAAvB,EAA0CC,QAA1C,EAAoE;AACnFH,IAAAA,OAAO,CAACe,gBAAR,CAAyBb,SAAzB,EAAoC,SAASoB,KAAT,CAAef,CAAf,EAAkB;AACpD;AACA,UAAIA,CAAC,CAACG,MAAF,IAAYH,CAAC,CAACG,MAAF,CAASS,mBAAzB,EAA8C;AAC5CZ,QAAAA,CAAC,CAACG,MAAF,CAASS,mBAAT,CAA6BZ,CAAC,CAACgB,IAA/B,EAAqCD,KAArC;AACD;;AAED,UAAItB,OAAO,IAAIO,CAAX,IAAgBA,CAAC,CAACiB,aAAtB,EAAqC;AACnC;AACAjB,QAAAA,CAAC,CAACiB,aAAF,CAAgBL,mBAAhB,CAAoCZ,CAAC,CAACgB,IAAtC,EAA4CD,KAA5C;AACD,OATmD,CAWpD;;;AACA,aAAOnB,QAAQ,CAACI,CAAD,CAAf;AACD,KAbD;AAcD;;AAxD8B;AAApBT,mB,CACGO,K,GAAQ,IAAIoB,GAAJ,E","sourcesContent":["import {getUniqueIdWithPrefix} from './_TypesHelpers'\r\n\r\nexport class DOMEventHandlerUtil {\r\n  public static store = new Map()\r\n\r\n  public static on(\r\n    element: HTMLElement,\r\n    selector: string,\r\n    eventName: string,\r\n    callBack: any\r\n  ): string {\r\n    const eventId = getUniqueIdWithPrefix('DOMEvent')\r\n    DOMEventHandlerUtil.store.set(eventId, (e: Event) => {\r\n      const targets = element.querySelectorAll(selector)\r\n      let target: HTMLElement | null = e.target as HTMLElement\r\n      while (target && target !== element) {\r\n        for (let i = 0; i < targets.length; i++) {\r\n          if (target === targets[i]) {\r\n            callBack.call(target, e)\r\n          }\r\n        }\r\n\r\n        if (target.parentElement) {\r\n          target = target.parentElement\r\n        } else {\r\n          target = null\r\n        }\r\n      }\r\n    })\r\n    element.addEventListener(eventName, DOMEventHandlerUtil.store.get(eventId))\r\n    return eventId\r\n  }\r\n\r\n  public static off(element: HTMLElement, eventName: string, eventId: string): void {\r\n    const funcFromStore = DOMEventHandlerUtil.store.get(eventId)\r\n    if (!funcFromStore) {\r\n      return\r\n    }\r\n\r\n    element.removeEventListener(eventName, funcFromStore)\r\n    DOMEventHandlerUtil.store.delete(eventId)\r\n  }\r\n\r\n  public static one(element: HTMLElement, eventName: string, callBack: Function): void {\r\n    element.addEventListener(eventName, function calee(e) {\r\n      // remove event\r\n      if (e.target && e.target.removeEventListener) {\r\n        e.target.removeEventListener(e.type, calee)\r\n      }\r\n\r\n      if (element && e && e.currentTarget) {\r\n        // if (element && element.removeEventListener && e && e.currentTarget) {\r\n        e.currentTarget.removeEventListener(e.type, calee)\r\n      }\r\n\r\n      // call hander\r\n      return callBack(e)\r\n    })\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}